var P=Object.defineProperty;var T=(e,t,n)=>t in e?P(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var f=(e,t,n)=>(T(e,typeof t!="symbol"?t+"":t,n),n);const $=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};$();class q{constructor(t,n={x:0,y:0}){this.ctx=t,this.position=n}project({x:t,y:n}){return{x:this.position.x-t,y:this.position.y-n}}unproject({x:t,y:n}){return{x:this.position.x-t,y:this.position.y-n}}}const N=5;class y{constructor(t,n,s={x:0,y:0},o=20,i="white"){f(this,"selected",!1);f(this,"name","PhysicCircle");this.position=t,this.mass=n,this.speed=s,this.radius=o,this.color=i}draw(t){U(t,this.position,this.radius,this.selected?"red":this.color,"black",1)}update(t){this.position.x+=this.speed.x*t,this.position.y+=this.speed.y*t}attractTo(t,n){const s=this.position.x-t.position.x,o=this.position.y-t.position.y,i=s**2+o**2;if(Math.sqrt(i)<this.radius+t.radius)return;const h=Math.atan2(o,s),m=N*(t.mass*this.mass/i)/this.mass,O=Math.cos(h)*m,A=Math.sin(h)*m;this.speed.x-=O*n,this.speed.y-=A*n}}const M=e=>4/3*Math.PI*e**3;function Y(e){return Math.sqrt(e.x**2+e.y**2)}const d=document.getElementById("simulationCanvas"),j=document.getElementById("canvasContainer"),g=document.getElementById("infoMenu"),x=document.getElementById("speedSlider"),w=document.getElementById("speedChkBox"),S=document.getElementById("speedDisplay"),B=d.getContext("2d"),v=10;let k=1,p,C,E;const L=e=>{requestAnimationFrame(L);const{width:t,height:n}=j.getBoundingClientRect();if((t!==E||n!==C)&&([d.height,d.width]=[C,E]=[n,t],[u.position.x,u.position.y]=[t/2,n/2]),!p){F(),p=e;return}const s=e-p;p=e;for(let o=0;o<v;o++)_(s/1e3/v*k);R()};requestAnimationFrame(L);const I=50,b=100,u=new q(B,{x:300,y:300});let a,l,r;function F(){l=new y({x:0,y:0},M(I),void 0,I,"orange"),l.name="The Center Object",window.objects=a=[...Array(b)].map((t,n)=>{const s=n/b*Math.PI*2,o=20,i=300;return new y({x:Math.cos(s)*i,y:Math.sin(s)*i},M(o),{x:Math.cos(s+Math.PI/2)*100,y:Math.sin(s+Math.PI/2)*60},o)}),d.addEventListener("click",t=>{const n=u.unproject({x:t.offsetX,y:t.offsetY});if(t.shiftKey){a.push(new y(n,1,void 0,25,"#ffc"));return}r&&(g.style.display="none",r.selected=!1,r=void 0);const s=[l,...a].reverse().find(o=>Math.sqrt((n.x-o.position.x)**2+(n.y-o.position.y)**2)<o.radius);if(s){r=s,r.selected=!0,g.style.display="block";return}}),x.addEventListener("input",e),w.addEventListener("input",e),S.addEventListener("click",()=>{x.valueAsNumber=50,e()});function e(){const t=parseInt(x.value),n=100**(t/100*2);X(w.checked?-n:n)}}function X(e){k=e/100,S.textContent=(e<20?Math.floor(e*10)/10:Math.floor(e))+"%"}function _(e){a.forEach(t=>t.attractTo(l,e)),a.forEach(t=>t.update(e))}function R(){B.clearRect(0,0,d.width,d.height),l.draw(u),a.forEach(e=>e.draw(u)),D()}function D(){if(r){const{position:e,speed:t}=r;g.textContent=`[${r.name}]
position: X${Math.round(e.x)} Y${Math.round(e.y)}
speed: X${Math.round(t.x)} Y${Math.round(t.y)} \u27A1\uFE0F ${Math.round(Y(t))}
mass: ${Math.round(r.mass)}
radius: ${Math.round(r.radius)}`}}function U(e,t,n,s,o,i){const{x:c,y:h}=e.project(t);e.ctx.beginPath(),e.ctx.arc(c,h,n,0,2*Math.PI,!1),e.ctx.fillStyle=s,e.ctx.fill(),i&&(e.ctx.strokeStyle=o,e.ctx.lineWidth=i,e.ctx.stroke())}
